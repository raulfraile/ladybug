<iframe id="ladybug_iframe_{{ id }}" frameborder="0" width="500" height="100" style="margin: 5px;"></iframe>

<script>
    var current_height = 0;
    var current_width = 0;

    var ladybug_iframe_{{ id }} = document.getElementById("ladybug_iframe_{{ id }}").contentWindow.document;
    ladybug_iframe_{{ id }}.open();
    ladybug_iframe_{{ id }}.write(
            "<style>" + document.getElementById("ladybug_css_{{ id }}").innerHTML + "</style>" +
            "<script>" + document.getElementById("ladybug_js_{{ id }}").innerHTML + "\<\/script>" +
            document.getElementById("ladybug_content_{{ id }}").innerHTML.replace(/\<ladybug_script\>/, "<script>").replace(/\<\/ladybug_script\>/, "\<\/script>")
    );
    ladybug_iframe_{{ id }}.close();

    resize_iframe(true);

    //var int = window.setInterval(function(){resize_iframe(false)}, 1000);


    function resize_iframe(initial) {

        if (initial == undefined) initial = false;

        var height = ladybug_iframe_{{ id }}.body.scrollHeight;
        var width = ladybug_iframe_{{ id }}.body.scrollWidth;

        if (initial || height > current_height) {
            document.getElementById("ladybug_iframe_{{ id }}").height = height + "px";
            current_height = height;
        }

        if (initial || width > current_width) {
            document.getElementById("ladybug_iframe_{{ id }}").width = width + "px";
            current_width = width;
        }
    }
</script>